<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Grapes of Pat</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<style>
			.demo {
				display: flex;
			}
			.qr {
				float: left;
				/* flex: 1; */
			}
			.command-output {
				flex: 1;
				margin-left: 22px; /* FIXME */
				white-space: nowrap;
			}

			.features section {
				display: flex;
				flex-direction: column;
				justify-content: space-between;
			}
		</style>
	</head>
	<body class="is-preload">

		<!-- Sidebar -->
			<section id="sidebar">
				<div class="inner">
					<nav>
						<ul>
							<li><a href="#intro">Welcome</a></li>
							<li><a href="#section-using">Using</a></li>
							<li><a href="#section-controllers">Controllers</a></li>
							<!-- <li><a href="#section-examples">Examples</a></li> -->
						</ul>
					</nav>
				</div>
			</section>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Intro -->
					<section id="intro" class="wrapper style1 fullscreen fade-up">
						<div class="inner">
							<h1>Grapes of Pat</h1>
							<p>
								A service that allows your users to interact with your web application using their phones.
							</p>
							<ul class="actions">
								<li><a href="#section-using" class="button scrolly">Learn more</a></li>
							</ul>
						</div>
					</section>

				<!-- section-using -->
					<section id="section-using" class="wrapper style3 fade-up">
						<div class="inner">
							<h2>Using</h2>
							<p>Add the library to your application.</p>

							<pre><code>&lt;script src="//grapesofpat.com/library/grapes-of-pat.js"&gt;&lt;/script&gt;</code></pre>

							<p>Add some code to setup the server with some users.</p>
<pre><code>var grapes = window.grapesOfPat;
grapes.createServer({
		clientIds: ['p1', 'p2'],
		controller: 'boolean-controller', // See <a href="#section-controllers" class="scrolly">Controllers</a> 
		onmessage: function(msg) {
			// Do Something when a message comes in from the client.
		}
	})
	.then(function(connectionDetails) {
		// One url is generated per client.
		connectionDetails.urls.forEach(function(url) {
			document.body.appendChild(document.createTextNode(url));
			document.body.appendChild(document.createElement("br"));
		});
	});</code></pre>
							
							<ul class="actions">
								<li><a href="#section-controllers" class="button scrolly">Controllers</a></li>
							</ul>
						</div>
					</section>
					

					<!-- section-controllers -->
						<section id="section-controllers" class="wrapper style1 fade-up">
							<div class="inner">
								<h2>Controllers</h2>
								<p>
									Controllers are webpages that a user opens on their phone in order to send commands to your application.
									The links to these webpages are generated by the client library. As an application developer you only 
									need to specify the type of controller when you are creating a server.
								</p>
								<div class="features">
									<section>
										<span class="icon major fa-gamepad"></span>
										<h3>boolean-controller</h3>
										<p>This is a simple controller that only allows the user to send true or false.</p>
										<div class="demo">
											<div class="qr"></div>
											<textarea class="command-output"></textarea>
										</div>
										<!-- <a href="/controller/boolean-controller.html"  class="button">Launch</a> -->
									</section>
									<section>
										<span class="icon major fa-gamepad"></span>
										<h3>dpad-ab-controller</h3>
										<p>
											A controller where the left half of the phone screen sends directional commands. The right half sends an 'a' or
											'b' action.
										</p>
										<div class="demo">
											<div class="qr"></div>
											<textarea class="command-output"></textarea>
										</div>
									</section>
									<section>
										<span class="icon major fa-gamepad"></span>
										<h3>gyroscope-controller</h3>
										<p>
											A controller that uses the gyroscope on the phone to send x, y and z values.
										</p>
										<div class="demo">
											<div class="qr"></div>
											<textarea class="command-output"></textarea>
										</div>
									</section>
								</div>
							</div>
						</section>

				<!-- section-examples -->
				<!--
					<section id="section-examples" class="wrapper style2 spotlights">
						<section>
							<a href="#" class="image"><img src="images/pic01.jpg" alt="" data-position="center center" /></a>
							<div class="content">
								<div class="inner">
									<h2>Sed ipsum dolor</h2>
									<p>Phasellus convallis elit id ullamcorper pulvinar. Duis aliquam turpis mauris, eu ultricies erat malesuada quis. Aliquam dapibus.</p>
									<ul class="actions">
										<li><a href="generic.html" class="button">Learn more</a></li>
									</ul>
								</div>
							</div>
						</section>
						<section>
							<a href="#" class="image"><img src="images/pic02.jpg" alt="" data-position="top center" /></a>
							<div class="content">
								<div class="inner">
									<h2>Feugiat consequat</h2>
									<p>Phasellus convallis elit id ullamcorper pulvinar. Duis aliquam turpis mauris, eu ultricies erat malesuada quis. Aliquam dapibus.</p>
									<ul class="actions">
										<li><a href="generic.html" class="button">Learn more</a></li>
									</ul>
								</div>
							</div>
						</section>
						<section>
							<a href="#" class="image"><img src="images/pic03.jpg" alt="" data-position="25% 25%" /></a>
							<div class="content">
								<div class="inner">
									<h2>Ultricies aliquam</h2>
									<p>Phasellus convallis elit id ullamcorper pulvinar. Duis aliquam turpis mauris, eu ultricies erat malesuada quis. Aliquam dapibus.</p>
									<ul class="actions">
										<li><a href="generic.html" class="button">Learn more</a></li>
									</ul>
								</div>
							</div>
						</section>
					</section>
				-->
			</div>

		<!-- Footer -->
			<footer id="footer" class="wrapper style1-alt">
				<div class="inner">
					<ul class="menu">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

		<!-- Live Demo Scripts-->
		<script src="/library/grapes-of-pat.js"></script>
		<script src="/examples/lib/qrcode.min.js"></script>
		<script>
			var $controllerSections = $("#section-controllers .features section");
			var demos = $.map($controllerSections, function(section) {
				var $section = $(section);
				var controllerName = $section.find("h3").text();
				return {
					controllerName: controllerName,
					$div: $section.find(".demo")
				}
			});

			var demoMap = demos.reduce(function(hash, demo) {
				hash[demo.controllerName] = demo;
				return hash;
			}, {});

			var grapes = window.grapesOfPat;
			grapes.createServer({
					clientIds: demos.map(function(d) { return d.controllerName }),
					controller: "REPLACE_ME",
					onmessage: function(msg) {
						console.log(msg);
						var output = msg.command !== undefined ? JSON.stringify(msg.command, null, 2)
							: msg.type;
						var $demoDiv = demoMap[msg.clientId].$div;
						$demoDiv.find(".command-output").html(output);						
					}
				})
				.then(function(connectionDetails) {
					var urls = connectionDetails.urls;
					for (var i = 0; i < urls.length; i++) {
						var demo = demos[i];
						var url = urls[i].replace("REPLACE_ME", demo.controllerName);
						new QRCode(demo.$div.find(".qr")[0], {
							text: url,
							width: 128,
							height: 128
						});
					}
					
				});

			

		</script>

	</body>
</html>